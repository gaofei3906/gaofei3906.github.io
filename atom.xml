<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>我的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-11-30T09:51:55.241Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>高立飞</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2018/12/02/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    <id>http://yoursite.com/2018/12/02/微信开发/</id>
    <published>2018-12-02T03:27:44.721Z</published>
    <updated>2018-11-30T09:51:55.241Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、昨日回顾"><a href="#一、昨日回顾" class="headerlink" title="一、昨日回顾"></a>一、昨日回顾</h1><h2 id="1-知识回顾"><a href="#1-知识回顾" class="headerlink" title="1. 知识回顾"></a>1. 知识回顾</h2><h2 id="2-昨日反馈"><a href="#2-昨日反馈" class="headerlink" title="2. 昨日反馈"></a>2. 昨日反馈</h2><h1 id="二、知识路径"><a href="#二、知识路径" class="headerlink" title="二、知识路径"></a>二、知识路径</h1><ul><li><p>微信公众平台基本介绍</p><p>​    微信发展史</p><p>​    什么是微信公众平台</p><p>​    微信与微信公众平台的区别</p><p>​    微信公众平台相关说明</p><p>​    微信公众平台技术文档</p></li><li><p>注册公众平台（订阅号）</p><p>==目标：能够注册公众平台订阅号==</p></li><li><p>两种模式</p><p>​    编辑模式</p><p>==目标：能够掌握使用编辑模式设置简单内容操作==</p><p>​    开发者模式</p><p>​    微信公众平台测试平台使用<br>==目标：能够完成注册natapp和相关配置；能够开启开发模式==</p></li></ul><h1 id="三、今日课程内容：微信开发01"><a href="#三、今日课程内容：微信开发01" class="headerlink" title="三、今日课程内容：微信开发01"></a>三、今日课程内容：微信开发01</h1><h2 id="1-微信公众平台基本介绍"><a href="#1-微信公众平台基本介绍" class="headerlink" title="1. 微信公众平台基本介绍"></a>1. 微信公众平台基本介绍</h2><h3 id="微信发展史"><a href="#微信发展史" class="headerlink" title="微信发展史"></a>微信发展史</h3><ul><li>2011年1月21日，腾讯推出微信应用程序。（张小龙）</li><li>2012年8月20日，腾讯推出微信公众平台功能，同年11月开放第三方接口</li><li>2013年11月注册用户量突破6亿，是亚洲地区最大用户群体的移动即时通讯软件。</li><li>截止到现在，微信已经覆盖中国 96% 以上的智能手机，尽管微信的月活用户已经达到10亿，其在中国市场依旧有着非常大的增长潜力。</li></ul><h3 id="什么是微信公众平台"><a href="#什么是微信公众平台" class="headerlink" title="什么是微信公众平台"></a>什么是微信公众平台</h3><p>官网登录网址：<a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">https://mp.weixin.qq.com/</a></p><p>微信公众平台是腾讯为了让用户申请和管理微信公众账号而推出的一个Web平台，而微信公众账号的操作管理在这个平台下进行。所有用户都在腾讯提供的统一微信公众平台下进行用来管理微信公众号相关操作。</p><h3 id="微信与微信公众平台的区别"><a href="#微信与微信公众平台的区别" class="headerlink" title="微信与微信公众平台的区别"></a>微信与微信公众平台的区别</h3><p>微信：基于点对点关系 个人私人化使用 你发信息给你的同学, 1 对 1 关系</p><p>微信公众平台：是基于一对多关系 1 对 N；  公众平台可以给关注了它的用户进行资讯信息推送及其相关服务功能的提供，相当于一个24为您服务的服务人员。可用于品牌推广，个人展示等。</p><h3 id="微信公众平台相关说明"><a href="#微信公众平台相关说明" class="headerlink" title="微信公众平台相关说明"></a>微信公众平台相关说明</h3><p>微信公众平台可以对4个部分进行控制，分别是订阅号、服务号、企业微信（企业号）和小程序。当前我们只针对非小程序部分进行说明。</p><p><img src="img/1" alt="1543197798332"></p><p>小结：==个人注册使用只能是 【订阅号】==，如果企业的话，都是可以注册，但是根据业务不同来进行选择，</p><p>服务类：用服务号</p><p>企业内部：企业号</p><p>资讯或推广：用订阅号</p><h3 id="微信公众平台技术文档"><a href="#微信公众平台技术文档" class="headerlink" title="微信公众平台技术文档"></a>微信公众平台技术文档</h3><p>地址：<a href="https://mp.weixin.qq.com/wiki" target="_blank" rel="noopener">https://mp.weixin.qq.com/wiki</a></p><h2 id="2-注册公众平台（订阅号）"><a href="#2-注册公众平台（订阅号）" class="headerlink" title="2. 注册公众平台（订阅号）"></a>2. 注册公众平台（订阅号）</h2><ol><li><p>进入官网，点击立即注册：</p><p><img src="img/4" alt="1543198385315"></p><p>然后选择订阅号：</p><p><img src="img/2" alt="1543198270473"></p></li><li><p>填写相关信息，点击注册：</p><p><img src="img/3" alt="1543198356436"></p></li><li><p>根据提示填写相关信息，进入如下界面时需要选择类型，我们当前是个人，所以选择订阅号，一定不要选错：</p><p><img src="img/5" alt="1543198483849"></p></li><li><p>进入订阅号用户认证信息填写页面：</p><p><img src="img/6" alt="1543198758686"></p></li><li><p>完善订阅号信息：</p><p><img src="img/7" alt="1543198990911"></p></li><li><p>最终进入如下后台界面，说明订阅号注册成功。</p><p><img src="img/8" alt="1543199046354"></p></li></ol><h2 id="3-两种模式"><a href="#3-两种模式" class="headerlink" title="3. 两种模式"></a>3. 两种模式</h2><p>在微信公众平台存在两种运行模式：1）编辑模式；2）开发者模式；</p><h3 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h3><p>使用微信公众号提供的统一的微信公众管理平台，进行操作。所有功能都已经写好，直接使用即可。只需要编辑相关内容信息。==适合不会编程的人使用==。 </p><p>如果使用了编辑模式，它就不能很好的与现有的公司的系统结合，所以一般来说，在企业中不适用。</p><h4 id="被关注时自动回复"><a href="#被关注时自动回复" class="headerlink" title="被关注时自动回复"></a>被关注时自动回复</h4><ol><li><p>进入微信公众平台后台，设置如下：</p><p><img src="img/11" alt="1543287229039"></p></li><li><p>关注订阅号，</p><p><img src="img/12" alt="1543288141392"></p><p>点击后：</p><p><img src="img/13" alt="1543288192356"></p><p>下载后，扫码关注即可，</p></li><li><p>关注后效果为：</p><p><img src="img/14" alt="1543288237012"></p><p>输出了刚才设置的自动回复的内容。</p></li></ol><h4 id="自定义菜单"><a href="#自定义菜单" class="headerlink" title="自定义菜单"></a>自定义菜单</h4><p>自定义菜单注意事项：</p><ul><li>底部菜单功能不区分公众号的类型，认不认证都是有相应的创建权限</li><li>认证后，才可以填写跳转到任意地址按钮</li><li>顶级菜单最多可以创建==3个==；标题最多的汉字是4个，英文8个</li><li>顶级下面的子级菜单最多可以创建==5个==</li><li>顶级下面有子级菜单，则对其顶级菜单的设置的属性将不生效</li><li>菜单创建生效是异步执行，==如果开发时想及时看到效果，则需要取关再关注==</li></ul><ol><li><p>进入相关公众平台后台界面进行设置，</p><p><img src="img/15" alt="1543289270553"></p></li></ol><h3 id="开发者模式"><a href="#开发者模式" class="headerlink" title="开发者模式"></a>开发者模式</h3><p>微信公众平台，可以在后台设置自动回复，但有时这个也满足不了我们的需求，可以开启开发模式，把公众号的消息回调到自己的服务器去处理。</p><p>微信公众平台提供了服务器接入的方式，具有开发能力的运营者，可以进行定制开发。</p><p>开发者模式：特别适合企业，所以我们说的微信公众号开发就是说开发者模式的学习与使用。</p><p>==开发者模式需要<strong>一台外网能访问到的服务器</strong>==</p><p><strong>==注意：==</strong>微信公众平台管理中，编辑模式和开发者模式是==互斥的==，也就是说只能使用其中一种。</p><p>开发者模式有2种请求方式：</p><p>==被动==：</p><p><img src="img/9" alt="1543199906702"></p><p>==主动==：</p><p><img src="img/10.png" alt="1543199922625"></p><h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><p>实际的开发工作中，我们首先需要有一个外网服务器，比如 阿里云、腾讯云、百度云等；而对于我们当前学习测试阶段，我们可以换一种方案代替外网服务器：==内网穿透==。</p><h5 id="内网穿透基本介绍"><a href="#内网穿透基本介绍" class="headerlink" title="内网穿透基本介绍"></a>内网穿透基本介绍</h5><p>natapp软件,它给我们提供一个外网的域名，通过此软件，把我们内网的IP和端口，映射到它自己的服务器上面，这样公众号服务器访问到他们的服务器上面，然后它在转发到我们的内网中，这样就实现了内网的穿透。</p><p>网址：<a href="https://natapp.cn/" target="_blank" rel="noopener">https://natapp.cn/</a></p><p>软件平台，需要注册，注册是免费不花钱的。可以免费使用，需要是成年人并且实名认证。</p><p><img src="img/16" alt="1543289685702"></p><h5 id="注册natapp"><a href="#注册natapp" class="headerlink" title="注册natapp"></a>注册natapp</h5><ol><li><p>首先进入官网进行注册：</p><p><img src="img/17" alt="1543289857212"></p><p>注册成功后进行需要进行实名认证：</p><p><img src="img/18" alt="1543290055619"></p><p>点击后填写信息即可：</p><p><img src="img/19" alt="1543290511148"></p></li></ol><h5 id="购买隧道"><a href="#购买隧道" class="headerlink" title="购买隧道"></a>购买隧道</h5><ol><li><p>在后台界面点击：购买隧道–》免费隧道</p><p><img src="img/21" alt="1543290963279"></p><p>填写信息，点击购买：</p><p><img src="img/20" alt="1543299668463"></p></li><li><p>成功后查看：</p><p><img src="img/22" alt="1543291116310"></p><p>列表中的==autotoken==是一个非常重要的信息，不要给别人，这就是我们进行内网穿透，的凭证，用此凭证，我们就可以知道其身份，所以不要乱给别人使用，会影响到自己的环境的使用。</p></li></ol><h5 id="本机配置"><a href="#本机配置" class="headerlink" title="本机配置"></a>本机配置</h5><ol><li><p>下载软件：</p><p>软件下载: <a href="https://natapp.cn/#download" target="_blank" rel="noopener">https://natapp.cn/#download</a></p><p><img src="img/23" alt="1543291335687"></p><p>将软件解压缩：</p><p><img src="img/24" alt="1543291470046"></p></li><li><p>在解压后的文件夹中新建一个名为config.ini文件，</p><p><img src="img/25" alt="1543291614473"></p><p>打开后构建如下配置内容：</p><p><img src="img/26" alt="1543291715483"></p></li><li><p>在apache主配置文件httpd.conf中增加如下配置：</p><p><img src="img/27" alt="1543299753287"></p><p><img src="img/28" alt="1543299774986"></p></li><li><p>接着在apache的虚拟主机配置文件中增加如下配置：</p><p><img src="img/29" alt="1543299925913"></p><p>重启apache，</p><p><img src="img/30" alt="1543299951683"></p></li><li><p>测试访问项目文件：</p><p>在day1/code目录下创建一个info.php文件，内容如下：</p><p><img src="img/31" alt="1543300014439"></p><p>然后在浏览器中访问：</p><p><img src="img/32" alt="1543300046197"></p><p>访问成功！</p></li><li><p>跟着进入natapp.exe所在目录，并且在当前目录下打开cmd黑窗口，</p><p>进入目录：</p><p><img src="img/33" alt="1543300118293"></p><p>打开黑窗口：</p><p><img src="img/34" alt="1543300146683"></p><p>在黑窗口中输入natapp后按回车：</p><p>输入：</p><p><img src="img/35" alt="1543300202624"></p><p>回车后，出现如下界面；==<strong>注意：</strong>不要关闭下面的界面==：</p><p><img src="img/36" alt="1543300347942"></p></li><li><p>使用远程地址替换本地地址进行测试访问：</p><p><img src="img/37" alt="1543300457362"></p><p>访问成功，说明配置OK。</p></li></ol><h4 id="下载官方接入代码"><a href="#下载官方接入代码" class="headerlink" title="下载官方接入代码"></a>下载官方接入代码</h4><p>下载地址：<a href="http://t.cn/RkGPhCJ" target="_blank" rel="noopener">http://t.cn/RkGPhCJ</a></p><p><img src="img/40" alt="1543309403216"></p><p>下载后进行解压：</p><p><img src="img/41" alt="1543309502497"></p><h4 id="开启开发模式"><a href="#开启开发模式" class="headerlink" title="开启开发模式"></a>开启开发模式</h4><ol><li><p>首先进入后台 设置–》公众号设置   启用开发者密码（点击后将会要求填写相关认证信息）：</p><p><img src="img/44" alt="1543310037754"></p><p>启用成功后界面效果为：</p><p><img src="img/45" alt="1543310411131"></p></li><li><p>然后将官方接入程序文件拷贝一份到day1/code目录下，并且改名为wx.php</p><p><img src="img/46" alt="1543312898271"></p><p>拷贝到day1/code下并改名：</p><p><img src="img/47" alt="1543312931075"></p><p>wx.php的内容：</p><p><img src="img/48" alt="1543312988123"></p></li><li><p>继续在该界面点击修改配置，填写相关信息：</p><p>点击：</p><p><img src="img/49" alt="1543313026174"></p><p>填写信息：</p><p><img src="img/38" alt="1543312806076"></p></li><li><p>提交后再点击启用按钮启用开发者模式：</p><p><img src="img/50" alt="1543313078620"></p><p>启用后界面效果为：</p><p><img src="img/51" alt="1543313103093"></p><p>到此，开发模式就已经开启成功。</p></li></ol><h3 id="微信公众平台测试平台使用"><a href="#微信公众平台测试平台使用" class="headerlink" title="微信公众平台测试平台使用"></a>微信公众平台测试平台使用</h3><p>因为我们使用的订阅号和服务号没有认证，所以很多的接口没有提供给我们，这样在测试的阶段和开发的阶段就没有办法进行了，所以公众号考虑到开发者的此情况的存在，故提供了一个测试平台公众号，用此公众号来开发测试，可以有所有的权限，这样对我们的开发就没有障碍了。但是不包括支付接口。 </p><p>测试平台登陆页面地址（需要扫码登陆）：<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login" target="_blank" rel="noopener">https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login</a></p><h4 id="测试平台接入"><a href="#测试平台接入" class="headerlink" title="测试平台接入"></a>测试平台接入</h4><p>登陆平台后，填写接口配置信息并提交：</p><p><img src="img/52" alt="1543314069508"></p><p><strong>==注意：==</strong>上图中URL地址需要和 公众平台后台开发者模式设置的地址一致；Token也需要保持一致。</p><p>提交后提示成功界面效果如下说明接入测试平台成功：</p><p><img src="img/53" alt="1543314200184"></p><h4 id="接收普通消息"><a href="#接收普通消息" class="headerlink" title="接收普通消息"></a>接收普通消息</h4><ol><li><p>将day1/code/wx.php中的代码进行调整，构建测试代码：</p><p><img src="img/54" alt="1543323599745"></p></li><li><p>我们当前使用的是PHP7.x，故将类wechatCallbackapiTest中reponseMsg方法里一句过时的代码改为可用的代码：</p><p><img src="img/55" alt="1543323702316"></p></li><li><p>扫码关注测试公众号：</p><p><img src="img/56" alt="1543323745937"></p><p>发送消息，查看测试公众号返回给用户的消息：</p><p><img src="img/57" alt="1543323899564"></p></li></ol><p><strong>==案例：==</strong>实现将接收到的普通消息录入到数据库中。</p><ol><li><p>在mysql中创建db8.tb1数据表：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create database db8;</span><br><span class="line"></span><br><span class="line">create table tb1(</span><br><span class="line">id int unsigned primary key auto_increment,</span><br><span class="line">openid varchar(100) not null default &apos;&apos; comment &apos;用户唯一标识openid&apos;,</span><br><span class="line">content varchar(255) not null default &apos;&apos; comment &apos;用户发送给平台的内容&apos;,</span><br><span class="line">post_date int unsigned not null default 0 comment &apos;用户发送时间&apos;</span><br><span class="line">)engine=MyISAM charset=utf8;</span><br></pre></td></tr></table></figure></li><li><p>将day1/code/wx.php获得的信息通过PDO录入到数据库tb1表中：</p><p><img src="img/58" alt="1543326106223"></p></li><li><p>测试用户发送消息后的效果：</p><p><img src="img/59" alt="1543326318097"></p><p>查看数据表：</p><p><img src="img/60" alt="1543326302801"></p></li></ol><h2 id="4-全天总结"><a href="#4-全天总结" class="headerlink" title="4. 全天总结"></a>4. 全天总结</h2><ol><li>微信公众平台：1) 订阅号； 2）服务号；3）企业号；</li><li>能够注册微信公众平台订阅号；</li><li>微信公众平台的两种模式：1)编辑模式； 2）开发者模式；</li><li>实现开发者模式必要的条件：必须要有一台线上的服务器；</li><li>实现接入微信公众平台</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、昨日回顾&quot;&gt;&lt;a href=&quot;#一、昨日回顾&quot; class=&quot;headerlink&quot; title=&quot;一、昨日回顾&quot;&gt;&lt;/a&gt;一、昨日回顾&lt;/h1&gt;&lt;h2 id=&quot;1-知识回顾&quot;&gt;&lt;a href=&quot;#1-知识回顾&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2018/12/01/hello-world/"/>
    <id>http://yoursite.com/2018/12/01/hello-world/</id>
    <published>2018-12-01T13:21:22.584Z</published>
    <updated>2018-12-02T02:46:19.433Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
